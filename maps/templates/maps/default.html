{% extends 'maps/base.html' %}
{% block homeactive %}nav-link {% endblock %}
{% block mapactive %}nav-link active{% endblock %}
{% block content %}
<h1>Home Map</h1>
<div id='map' width="100%" style='height:45em'></div>
<div id="instructions"></div>
<script>
     mapboxgl.accessToken = 'pk.eyJ1IjoiYm1ib2dvIiwiYSI6ImNrbWUzaG9qNjJyazMyd29qMGxrbHZvd2sifQ.oG0-1XdG-OAeNRxL0Vwz6g';

    navigator.geolocation.getCurrentPosition(successLocation, errorLocation, { enableHighAccuracy: true })

    function successLocation(position) {
        setupMap([position.coords.longitude, position.coords.latitude])
    }

    function errorLocation() {
        setupMap([-78.512, 38.036])
    }

    function setupMap(center) {
         var map = new mapboxgl.Map({
           container: 'map',
           center: center,
           zoom: 12,
           style: 'mapbox://styles/mapbox/streets-v11'
         })

         var nav = new mapboxgl.NavigationControl();
         map.addControl(nav);

         var directions = new MapboxDirections({
            accessToken: mapboxgl.accessToken,
         });

         map.addControl(directions, 'top-left');
     }

</script>
{% endblock %}
</body>
</html>
